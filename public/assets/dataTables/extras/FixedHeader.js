/*
 * File:        FixedHeader.js
 * Version:     2.0.6
 * Description: "Fix" a header at the top of the table, so it scrolls with the table
 * Author:      Allan Jardine (www.sprymedia.co.uk)
 * Created:     Wed 16 Sep 2009 19:46:30 BST
 * Language:    Javascript
 * License:     GPL v2 or BSD 3 point style
 * Project:     Just a little bit of fun - enjoy :-)
 * Contact:     www.sprymedia.co.uk/contact
 *
 * Copyright 2009-2012 Allan Jardine, all rights reserved.
 *
 * This source file is free software, under either the GPL v2 license or a
 * BSD style license, available at:
 *   http://datatables.net/license_gpl2
 *   http://datatables.net/license_bsd
 */
var FixedHeader=function(t,e){if(typeof this.fnInit!="function")return alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword."),void 0;var i={aoCache:[],oSides:{top:!0,bottom:!1,left:!1,right:!1},oZIndexes:{top:104,bottom:103,left:102,right:101},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bUseAbsPos:!1,bFooter:!1};this.fnGetSettings=function(){return i},this.fnUpdate=function(){this._fnUpdateClones(),this._fnUpdatePositions()},this.fnPosition=function(){this._fnUpdatePositions()},this.fnInit(t,e),typeof t.fnSettings=="function"&&(t._oPluginFixedHeader=this)};FixedHeader.prototype={fnInit:function(t,e){var i=this.fnGetSettings(),n=this;if(this.fnInitSettings(i,e),typeof t.fnSettings=="function"){if(typeof t.fnVersionCheck=="functon"&&t.fnVersionCheck("1.6.0")!==!0)return alert("FixedHeader 2 required DataTables 1.6.0 or later. Please upgrade your DataTables installation"),void 0;var s=t.fnSettings();if(s.oScroll.sX!=""||s.oScroll.sY!="")return alert("FixedHeader 2 is not supported with DataTables' scrolling mode at this time"),void 0;i.nTable=s.nTable,s.aoDrawCallback.push({fn:function(){FixedHeader.fnMeasure(),n._fnUpdateClones.call(n),n._fnUpdatePositions.call(n)},sName:"FixedHeader"})}else i.nTable=t;i.bFooter=$(">tfoot",i.nTable).length>0?!0:!1,i.bUseAbsPos=jQuery.browser.msie&&(jQuery.browser.version=="6.0"||jQuery.browser.version=="7.0"),i.oSides.top&&i.aoCache.push(n._fnCloneTable("fixedHeader","FixedHeader_Header",n._fnCloneThead)),i.oSides.bottom&&i.aoCache.push(n._fnCloneTable("fixedFooter","FixedHeader_Footer",n._fnCloneTfoot)),i.oSides.left&&i.aoCache.push(n._fnCloneTable("fixedLeft","FixedHeader_Left",n._fnCloneTLeft)),i.oSides.right&&i.aoCache.push(n._fnCloneTable("fixedRight","FixedHeader_Right",n._fnCloneTRight)),FixedHeader.afnScroll.push(function(){n._fnUpdatePositions.call(n)}),jQuery(window).resize(function(){FixedHeader.fnMeasure(),n._fnUpdateClones.call(n),n._fnUpdatePositions.call(n)}),FixedHeader.fnMeasure(),n._fnUpdateClones(),n._fnUpdatePositions()},fnInitSettings:function(t,e){"undefined"!=typeof e&&(typeof e.top!="undefined"&&(t.oSides.top=e.top),typeof e.bottom!="undefined"&&(t.oSides.bottom=e.bottom),typeof e.left!="undefined"&&(t.oSides.left=e.left),typeof e.right!="undefined"&&(t.oSides.right=e.right),typeof e.zTop!="undefined"&&(t.oZIndexes.top=e.zTop),typeof e.zBottom!="undefined"&&(t.oZIndexes.bottom=e.zBottom),typeof e.zLeft!="undefined"&&(t.oZIndexes.left=e.zLeft),typeof e.zRight!="undefined"&&(t.oZIndexes.right=e.zRight),typeof e.offsetTop!="undefined"&&(t.oOffset.top=e.offsetTop)),t.bUseAbsPos=jQuery.browser.msie&&(jQuery.browser.version=="6.0"||jQuery.browser.version=="7.0")},_fnCloneTable:function(t,e,i){var n,s=this.fnGetSettings();jQuery(s.nTable.parentNode).css("position")!="absolute"&&(s.nTable.parentNode.style.position="relative"),n=s.nTable.cloneNode(!1),n.removeAttribute("id");var o=document.createElement("div");return o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.className+=" FixedHeader_Cloned "+t+" "+e,"fixedHeader"==t&&(o.style.zIndex=s.oZIndexes.top),"fixedFooter"==t&&(o.style.zIndex=s.oZIndexes.bottom),"fixedLeft"==t?o.style.zIndex=s.oZIndexes.left:"fixedRight"==t&&(o.style.zIndex=s.oZIndexes.right),n.style.margin="0",o.appendChild(n),document.body.appendChild(o),{nNode:n,nWrapper:o,sType:t,sPosition:"",sTop:"",sLeft:"",fnClone:i}},_fnMeasure:function(){var t=this.fnGetSettings(),e=t.oMes,i=jQuery(t.nTable),n=i.offset(),s=this._fnSumScroll(t.nTable.parentNode,"scrollTop");this._fnSumScroll(t.nTable.parentNode,"scrollLeft"),e.iTableWidth=i.outerWidth(),e.iTableHeight=i.outerHeight(),e.iTableLeft=n.left+t.nTable.parentNode.scrollLeft,e.iTableTop=n.top+s,e.iTableRight=e.iTableLeft+e.iTableWidth,e.iTableRight=FixedHeader.oDoc.iWidth-e.iTableLeft-e.iTableWidth,e.iTableBottom=FixedHeader.oDoc.iHeight-e.iTableTop-e.iTableHeight},_fnSumScroll:function(t,e){for(var i=t[e];(t=t.parentNode)&&t.nodeName!="HTML"&&t.nodeName!="BODY";)i=t[e];return i},_fnUpdatePositions:function(){var t=this.fnGetSettings();this._fnMeasure();for(var e=0,i=t.aoCache.length;i>e;e++)t.aoCache[e].sType=="fixedHeader"?this._fnScrollFixedHeader(t.aoCache[e]):t.aoCache[e].sType=="fixedFooter"?this._fnScrollFixedFooter(t.aoCache[e]):t.aoCache[e].sType=="fixedLeft"?this._fnScrollHorizontalLeft(t.aoCache[e]):this._fnScrollHorizontalRight(t.aoCache[e])},_fnUpdateClones:function(){for(var t=this.fnGetSettings(),e=0,i=t.aoCache.length;i>e;e++)t.aoCache[e].fnClone.call(this,t.aoCache[e])},_fnScrollHorizontalRight:function(t){var e=this.fnGetSettings(),i=e.oMes,n=FixedHeader.oWin,s=FixedHeader.oDoc,o=t.nWrapper,a=jQuery(o).outerWidth();n.iScrollRight<i.iTableRight?(this._fnUpdateCache(t,"sPosition","absolute","position",o.style),this._fnUpdateCache(t,"sTop",i.iTableTop+"px","top",o.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+i.iTableWidth-a+"px","left",o.style)):i.iTableLeft<s.iWidth-n.iScrollRight-a?e.bUseAbsPos?(this._fnUpdateCache(t,"sPosition","absolute","position",o.style),this._fnUpdateCache(t,"sTop",i.iTableTop+"px","top",o.style),this._fnUpdateCache(t,"sLeft",s.iWidth-n.iScrollRight-a+"px","left",o.style)):(this._fnUpdateCache(t,"sPosition","fixed","position",o.style),this._fnUpdateCache(t,"sTop",i.iTableTop-n.iScrollTop+"px","top",o.style),this._fnUpdateCache(t,"sLeft",n.iWidth-a+"px","left",o.style)):(this._fnUpdateCache(t,"sPosition","absolute","position",o.style),this._fnUpdateCache(t,"sTop",i.iTableTop+"px","top",o.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",o.style))},_fnScrollHorizontalLeft:function(t){var e=this.fnGetSettings(),i=e.oMes,n=FixedHeader.oWin,s=(FixedHeader.oDoc,t.nWrapper),o=jQuery(s).outerWidth();n.iScrollLeft<i.iTableLeft?(this._fnUpdateCache(t,"sPosition","absolute","position",s.style),this._fnUpdateCache(t,"sTop",i.iTableTop+"px","top",s.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",s.style)):n.iScrollLeft<i.iTableLeft+i.iTableWidth-o?e.bUseAbsPos?(this._fnUpdateCache(t,"sPosition","absolute","position",s.style),this._fnUpdateCache(t,"sTop",i.iTableTop+"px","top",s.style),this._fnUpdateCache(t,"sLeft",n.iScrollLeft+"px","left",s.style)):(this._fnUpdateCache(t,"sPosition","fixed","position",s.style),this._fnUpdateCache(t,"sTop",i.iTableTop-n.iScrollTop+"px","top",s.style),this._fnUpdateCache(t,"sLeft","0px","left",s.style)):(this._fnUpdateCache(t,"sPosition","absolute","position",s.style),this._fnUpdateCache(t,"sTop",i.iTableTop+"px","top",s.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+i.iTableWidth-o+"px","left",s.style))},_fnScrollFixedFooter:function(t){var e=this.fnGetSettings(),i=e.oMes,n=FixedHeader.oWin,s=FixedHeader.oDoc,o=t.nWrapper,a=jQuery("thead",e.nTable).outerHeight(),r=jQuery(o).outerHeight();n.iScrollBottom<i.iTableBottom?(this._fnUpdateCache(t,"sPosition","absolute","position",o.style),this._fnUpdateCache(t,"sTop",i.iTableTop+i.iTableHeight-r+"px","top",o.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",o.style)):n.iScrollBottom<i.iTableBottom+i.iTableHeight-r-a?e.bUseAbsPos?(this._fnUpdateCache(t,"sPosition","absolute","position",o.style),this._fnUpdateCache(t,"sTop",s.iHeight-n.iScrollBottom-r+"px","top",o.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",o.style)):(this._fnUpdateCache(t,"sPosition","fixed","position",o.style),this._fnUpdateCache(t,"sTop",n.iHeight-r+"px","top",o.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft-n.iScrollLeft+"px","left",o.style)):(this._fnUpdateCache(t,"sPosition","absolute","position",o.style),this._fnUpdateCache(t,"sTop",i.iTableTop+r+"px","top",o.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",o.style))},_fnScrollFixedHeader:function(t){for(var e=this.fnGetSettings(),i=e.oMes,n=FixedHeader.oWin,s=(FixedHeader.oDoc,t.nWrapper),o=0,a=e.nTable.getElementsByTagName("tbody"),r=0;r<a.length;++r)o+=a[r].offsetHeight;i.iTableTop>n.iScrollTop+e.oOffset.top?(this._fnUpdateCache(t,"sPosition","absolute","position",s.style),this._fnUpdateCache(t,"sTop",i.iTableTop+"px","top",s.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",s.style)):n.iScrollTop+e.oOffset.top>i.iTableTop+o?(this._fnUpdateCache(t,"sPosition","absolute","position",s.style),this._fnUpdateCache(t,"sTop",i.iTableTop+o+"px","top",s.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",s.style)):e.bUseAbsPos?(this._fnUpdateCache(t,"sPosition","absolute","position",s.style),this._fnUpdateCache(t,"sTop",n.iScrollTop+"px","top",s.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft+"px","left",s.style)):(this._fnUpdateCache(t,"sPosition","fixed","position",s.style),this._fnUpdateCache(t,"sTop",e.oOffset.top+"px","top",s.style),this._fnUpdateCache(t,"sLeft",i.iTableLeft-n.iScrollLeft+"px","left",s.style))},_fnUpdateCache:function(t,e,i,n,s){t[e]!=i&&(s[n]=i,t[e]=i)},_fnCloneThead:function(t){var e=this.fnGetSettings(),i=t.nNode;for(t.nWrapper.style.width=jQuery(e.nTable).outerWidth()+"px";i.childNodes.length>0;)jQuery("thead th",i).unbind("click"),i.removeChild(i.childNodes[0]);var n=jQuery("thead",e.nTable).clone(!0)[0];i.appendChild(n),jQuery("thead>tr th",e.nTable).each(function(t){jQuery("thead>tr th:eq("+t+")",i).width(jQuery(this).width())}),jQuery("thead>tr td",e.nTable).each(function(t){jQuery("thead>tr td:eq("+t+")",i).width(jQuery(this).width())})},_fnCloneTfoot:function(t){var e=this.fnGetSettings(),i=t.nNode;for(t.nWrapper.style.width=jQuery(e.nTable).outerWidth()+"px";i.childNodes.length>0;)i.removeChild(i.childNodes[0]);var n=jQuery("tfoot",e.nTable).clone(!0)[0];i.appendChild(n),jQuery("tfoot:eq(0)>tr th",e.nTable).each(function(t){jQuery("tfoot:eq(0)>tr th:eq("+t+")",i).width(jQuery(this).width())}),jQuery("tfoot:eq(0)>tr td",e.nTable).each(function(t){jQuery("tfoot:eq(0)>tr th:eq("+t+")",i)[0].style.width(jQuery(this).width())})},_fnCloneTLeft:function(t){var e=this.fnGetSettings(),i=t.nNode,n=$("tbody",e.nTable)[0];for($("tbody tr:eq(0) td",e.nTable).length,$.browser.msie&&($.browser.version=="6.0"||$.browser.version=="7.0");i.childNodes.length>0;)i.removeChild(i.childNodes[0]);i.appendChild(jQuery("thead",e.nTable).clone(!0)[0]),i.appendChild(jQuery("tbody",e.nTable).clone(!0)[0]),e.bFooter&&i.appendChild(jQuery("tfoot",e.nTable).clone(!0)[0]),$("thead tr",i).each(function(){$("th:gt(0)",this).remove()}),$("tfoot tr",i).each(function(){$("th:gt(0)",this).remove()}),$("tbody tr",i).each(function(){$("td:gt(0)",this).remove()}),this.fnEqualiseHeights("tbody",n.parentNode,i);var s=jQuery("thead tr th:eq(0)",e.nTable).outerWidth();i.style.width=s+"px",t.nWrapper.style.width=s+"px"},_fnCloneTRight:function(t){var e=this.fnGetSettings(),i=$("tbody",e.nTable)[0],n=t.nNode,s=jQuery("tbody tr:eq(0) td",e.nTable).length;for($.browser.msie&&($.browser.version=="6.0"||$.browser.version=="7.0");n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.appendChild(jQuery("thead",e.nTable).clone(!0)[0]),n.appendChild(jQuery("tbody",e.nTable).clone(!0)[0]),e.bFooter&&n.appendChild(jQuery("tfoot",e.nTable).clone(!0)[0]),jQuery("thead tr th:not(:nth-child("+s+"n))",n).remove(),jQuery("tfoot tr th:not(:nth-child("+s+"n))",n).remove(),$("tbody tr",n).each(function(){$("td:lt("+(s-1)+")",this).remove()}),this.fnEqualiseHeights("tbody",i.parentNode,n);var o=jQuery("thead tr th:eq("+(s-1)+")",e.nTable).outerWidth();n.style.width=o+"px",t.nWrapper.style.width=o+"px"},fnEqualiseHeights:function(t,e,i){var n=$(t+" tr:eq(0)",e).children(":eq(0)"),s=n.outerHeight()-n.height(),o=$.browser.msie&&($.browser.version=="6.0"||$.browser.version=="7.0");$(t+" tr",i).each(function(i){$.browser.mozilla||$.browser.opera?$(this).children().height($(t+" tr:eq("+i+")",e).outerHeight()):$(this).children().height($(t+" tr:eq("+i+")",e).outerHeight()-s),o||$(t+" tr:eq("+i+")",e).height($(t+" tr:eq("+i+")",e).outerHeight())})}},FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0},FixedHeader.oDoc={iHeight:0,iWidth:0},FixedHeader.afnScroll=[],FixedHeader.fnMeasure=function(){var t=jQuery(window),e=jQuery(document),i=FixedHeader.oWin,n=FixedHeader.oDoc;n.iHeight=e.height(),n.iWidth=e.width(),i.iHeight=t.height(),i.iWidth=t.width(),i.iScrollTop=t.scrollTop(),i.iScrollLeft=t.scrollLeft(),i.iScrollRight=n.iWidth-i.iScrollLeft-i.iWidth,i.iScrollBottom=n.iHeight-i.iScrollTop-i.iHeight},FixedHeader.VERSION="2.0.6",FixedHeader.prototype.VERSION=FixedHeader.VERSION,jQuery(window).scroll(function(){FixedHeader.fnMeasure();for(var t=0,e=FixedHeader.afnScroll.length;e>t;t++)FixedHeader.afnScroll[t]()});